parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"z7A3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const t="3.2.1",e=2*Math.PI,s=Math.PI/2,i=e/3600,a=2**(1/24),h=440*a**-114;class n{constructor(t,e={}){let s;if(this._ready=!1,this._gradients={classic:{bgColor:"#111",colorStops:["hsl( 0, 100%, 50% )",{pos:.6,color:"hsl( 60, 100%, 50% )"},"hsl( 120, 100%, 50% )"]},prism:{bgColor:"#111",colorStops:["hsl( 0, 100%, 50% )","hsl( 60, 100%, 50% )","hsl( 120, 100%, 50% )","hsl( 180, 100%, 50% )","hsl( 240, 100%, 50% )"]},rainbow:{bgColor:"#111",dir:"h",colorStops:["hsl( 0, 100%, 50% )","hsl( 60, 100%, 50% )","hsl( 120, 100%, 50% )","hsl( 180, 100%, 47% )","hsl( 240, 100%, 58% )","hsl( 300, 100%, 50% )","hsl( 360, 100%, 50% )"]}},this._container=t||document.body,this._defaultWidth=this._container.clientWidth||640,this._defaultHeight=this._container.clientHeight||270,e.source&&(s=e.source.context));else if(s=e.audioCtx);else try{s=new(window.AudioContext||window.webkitAudioContext)}catch(c){throw new r("ERR_AUDIO_CONTEXT_FAIL","Could not create audio context. Web Audio API not supported?")}if(!s.createGain)throw new r("ERR_INVALID_AUDIO_CONTEXT","Provided audio context is not valid");const i=this._analyzer=[s.createAnalyser(),s.createAnalyser()],a=this._splitter=s.createChannelSplitter(2),h=this._merger=s.createChannelMerger(2);this._input=s.createGain(),this._output=s.createGain(),this._sources=[],e.source&&this.connectInput(e.source);for(const r of[0,1])a.connect(i[r],r);h.connect(this._output),this._outNodes=[],!1!==e.connectSpeakers&&this.connectOutput(),this._energy={val:0,peak:0,hold:0};const n=document.createElement("canvas");n.style="max-width: 100%;",this._container.appendChild(n),this._canvasCtx=n.getContext("2d");for(const r of["_scaleX","_scaleR"])this[r]=document.createElement("canvas").getContext("2d");const o=()=>{this._fsTimeout||(this._fsTimeout=window.setTimeout(()=>{this._fsChanging||(this._setCanvas("resize"),this._fsTimeout=0)},60))};if(window.ResizeObserver){new ResizeObserver(o).observe(this._container)}window.addEventListener("resize",o),n.addEventListener("fullscreenchange",()=>{this._fsChanging=!0,this._fsTimeout&&window.clearTimeout(this._fsTimeout),this._setCanvas("fschange"),this._fsTimeout=window.setTimeout(()=>{this._fsChanging=!1,this._fsTimeout=0},60)});const l=()=>{"suspended"==s.state&&s.resume(),window.removeEventListener("click",l)};window.addEventListener("click",l),this._calcAux(),this._setProps(e,!0),this._ready=!0,this._setCanvas("create")}get barSpace(){return this._barSpace}set barSpace(t){this._barSpace=+t||0,this._calcAux()}get fftSize(){return this._analyzer[0].fftSize}set fftSize(t){for(const s of[0,1])this._analyzer[s].fftSize=t;const e=this._analyzer[0].frequencyBinCount;this._fftData=[new Uint8Array(e),new Uint8Array(e)],this._calcBars()}get gradient(){return this._gradient}set gradient(t){if(!this._gradients.hasOwnProperty(t))throw new r("ERR_UNKNOWN_GRADIENT",`Unknown gradient: '${t}'`);this._gradient=t,this._makeGrad()}get height(){return this._height}set height(t){this._height=t,this._setCanvas("user")}get width(){return this._width}set width(t){this._width=t,this._setCanvas("user")}get mode(){return this._mode}set mode(t){const e=0|t;if(!(e>=0&&e<=10&&9!=e))throw new r("ERR_INVALID_MODE",`Invalid mode: ${t}`);this._mode=e,this._calcAux(),this._calcBars(),this._makeGrad()}get loRes(){return this._loRes}set loRes(t){this._loRes=!!t,this._setCanvas("lores")}get lumiBars(){return this._lumiBars}set lumiBars(t){this._lumiBars=!!t,this._calcAux(),this._calcLeds(),this._makeGrad()}get radial(){return this._radial}set radial(t){this._radial=!!t,this._calcAux(),this._calcLeds(),this._makeGrad()}get spinSpeed(){return this._spinSpeed}set spinSpeed(t){t=+t||0,void 0!==this._spinSpeed&&0!=t||(this._spinAngle=-s),this._spinSpeed=t}get reflexRatio(){return this._reflexRatio}set reflexRatio(t){if((t=+t||0)<0||t>=1)throw new r("ERR_REFLEX_OUT_OF_RANGE","Reflex ratio must be >= 0 and < 1");this._reflexRatio=t,this._calcAux(),this._makeGrad(),this._calcLeds()}get minFreq(){return this._minFreq}set minFreq(t){if(t<1)throw new r("ERR_FREQUENCY_TOO_LOW","Frequency values must be >= 1");this._minFreq=t,this._calcBars()}get maxFreq(){return this._maxFreq}set maxFreq(t){if(t<1)throw new r("ERR_FREQUENCY_TOO_LOW","Frequency values must be >= 1");this._maxFreq=t,this._calcBars()}get minDecibels(){return this._analyzer[0].minDecibels}set minDecibels(t){for(const e of[0,1])this._analyzer[e].minDecibels=t}get maxDecibels(){return this._analyzer[0].maxDecibels}set maxDecibels(t){for(const e of[0,1])this._analyzer[e].maxDecibels=t}get showLeds(){return this._showLeds}set showLeds(t){this._showLeds=!!t,this._calcAux()}get smoothing(){return this._analyzer[0].smoothingTimeConstant}set smoothing(t){for(const e of[0,1])this._analyzer[e].smoothingTimeConstant=t}get splitGradient(){return this._splitGradient}set splitGradient(t){this._splitGradient=!!t,this._makeGrad()}get stereo(){return this._stereo}set stereo(t){this._stereo=!!t,this._input.disconnect(),this._input.connect(this._stereo?this._splitter:this._analyzer[0]),this._analyzer[0].disconnect(),this._outNodes.length&&this._analyzer[0].connect(this._stereo?this._merger:this._output),this._calcAux(),this._createScales(),this._calcLeds(),this._makeGrad()}get volume(){return this._output.gain.value}set volume(t){this._output.gain.value=t}get audioCtx(){return this._input.context}get canvas(){return this._canvasCtx.canvas}get canvasCtx(){return this._canvasCtx}get connectedSources(){return this._sources}get connectedTo(){return this._outNodes}get energy(){return this.getEnergy()}get fsWidth(){return this._fsWidth}get fsHeight(){return this._fsHeight}get fps(){return this._fps}get isFullscreen(){return(document.fullscreenElement||document.webkitFullscreenElement)===this.canvas}get isOctaveBands(){return this._isOctaveBands}get isLedDisplay(){return this._isLedDisplay}get isLumiBars(){return this._isLumiBars}get isOn(){return void 0!==this._runId}get peakEnergy(){return this.getEnergy("peak")}get pixelRatio(){return this._pixelRatio}static get version(){return t}connectInput(t){const e=t instanceof HTMLMediaElement;if(!e&&!t.connect)throw new r("ERR_INVALID_AUDIO_SOURCE","Audio source must be an instance of HTMLMediaElement or AudioNode");const s=e?this.audioCtx.createMediaElementSource(t):t;return this._sources.includes(s)||(s.connect(this._input),this._sources.push(s)),s}disconnectInput(t){t?Array.isArray(t)||(t=[t]):t=Array.from(this._sources);for(const e of t){const t=this._sources.indexOf(e);t>=0&&(e.disconnect(this._input),this._sources.splice(t,1))}}connectOutput(t=this.audioCtx.destination){if(!this._outNodes.includes(t)&&(this._output.connect(t),this._outNodes.push(t),1==this._outNodes.length))for(const e of[0,1])this._analyzer[e].connect(this._stereo||e?this._merger:this._output,0,e)}disconnectOutput(t){if((!t||this._outNodes.includes(t))&&(this._output.disconnect(t),this._outNodes=t?this._outNodes.filter(e=>e!==t):[],0==this._outNodes.length))for(const e of[0,1])this._analyzer[e].disconnect()}getEnergy(t,e){if(void 0===t)return this._energy.val;if(t!=(0|t)){if("peak"==t)return this._energy.peak;const s={bass:[20,250],lowMid:[250,500],mid:[500,2e3],highMid:[2e3,4e3],treble:[4e3,16e3]};if(!s[t])return null;[t,e]=s[t]}const s=this._freqToBin(t),i=e?this._freqToBin(e):s,a=this._stereo+1;let h=0;for(let n=0;n<a;n++)for(let t=s;t<=i;t++)h+=this._fftData[n][t];return h/(i-s+1)/a/255}registerGradient(t,e){if("string"!=typeof t||0==t.trim().length)throw new r("ERR_GRADIENT_INVALID_NAME","Gradient name must be a non-empty string");if("object"!=typeof e)throw new r("ERR_GRADIENT_NOT_AN_OBJECT","Gradient options must be an object");if(void 0===e.colorStops||e.colorStops.length<2)throw new r("ERR_GRADIENT_MISSING_COLOR","Gradient must define at least two colors");this._gradients[t]={},void 0!==e.bgColor?this._gradients[t].bgColor=e.bgColor:this._gradients[t].bgColor="#111",void 0!==e.dir&&(this._gradients[t].dir=e.dir),this._gradients[t].colorStops=e.colorStops}setCanvasSize(t,e){this._width=t,this._height=e,this._setCanvas("user")}setFreqRange(t,e){if(t<1||e<1)throw new r("ERR_FREQUENCY_TOO_LOW","Frequency values must be >= 1");this._minFreq=Math.min(t,e),this._maxFreq=Math.max(t,e),this._calcBars()}setLedParams(t){let e,s,i;t&&(e=0|t.maxLeds,s=+t.spaceV,i=+t.spaceH),this._ledParams=e>0&&s>0&&i>=0?[e,s,i]:void 0,this._calcLeds()}setOptions(t){this._setProps(t)}setSensitivity(t,e){for(const s of[0,1])this._analyzer[s].minDecibels=Math.min(t,e),this._analyzer[s].maxDecibels=Math.max(t,e)}toggleAnalyzer(t){const e=this.isOn;return void 0===t&&(t=!e),e&&!t?(cancelAnimationFrame(this._runId),this._runId=void 0):!e&&t&&(this._frame=this._fps=0,this._time=performance.now(),this._runId=requestAnimationFrame(t=>this._draw(t))),this.isOn}toggleFullscreen(){if(this.isFullscreen)document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{const t=this.canvas;t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}}_calcAux(){const t=this.canvas;this._radius=t.height*(this._stereo?.375:.125)|0,this._barSpacePx=Math.min(this._barWidth-1,this._barSpace>0&&this._barSpace<1?this._barWidth*this._barSpace:this._barSpace),this._isOctaveBands=this._mode%10!=0,this._isLedDisplay=this._showLeds&&this._isOctaveBands&&!this._radial,this._isLumiBars=this._lumiBars&&this._isOctaveBands&&!this._radial,this._maximizeLeds=!this._stereo||this._reflexRatio>0&&!this._isLumiBars;const e=this._stereo&&!this._radial;this._channelHeight=t.height-(e&&!this._isLedDisplay?.5:0)>>e,this._analyzerHeight=this._channelHeight*(this._isLumiBars||this._radial?1:1-this._reflexRatio)|0,this._channelGap=e?t.height-2*this._channelHeight:0}_calcLeds(){if(!this._isOctaveBands||!this._ready)return;const t=this._pixelRatio/(window.devicePixelRatio>1&&window.screen.height<=540?2:1),e=this._ledParams,[s,i,a]=e||[[],[128,3,.45],[128,4,.225],[96,6,.225],[80,6,.225],[80,6,.125],[64,6,.125],[48,8,.125],[24,16,.125]][this._mode];let h,n,r=this._analyzerHeight;if(e){const e=2*t;let a;h=s+1;do{n=(a=r/--h/(1+i))*i}while((a<e||n<e)&&h>1)}else{const e=540/i;n=Math.min(i*t,Math.max(2,r/e+.1|0))}this._maximizeLeds&&(r+=n),e||(h=Math.min(s,r/(2*n)|0)),this._leds=[h,a>=1?a:this._barWidth*a,n,r/h-n]}_draw(t){const a=this._canvasCtx,h=a.canvas,n=this._scaleX.canvas,r=this._scaleR.canvas,o=this._energy,l=this._isOctaveBands,c=this._isLedDisplay,_=this._isLumiBars,d=this._radial,u=this._stereo,f=this._mode,g=this._channelHeight,p=this._channelGap,m=this._analyzerHeight,w=h.width>>1,x=h.height>>1,v=this._radius;o.val>0&&(this._spinAngle+=this._spinSpeed*i);const y=(t,s)=>{const i=v+s,a=e*(t/h.width)+this._spinAngle;return[w+i*Math.cos(a),x+i*Math.sin(a)]},b=(t,e,s,i)=>{a.moveTo(...y(t,e)),a.lineTo(...y(t,e+i)),a.lineTo(...y(t+s,e+i)),a.lineTo(...y(t+s,e))},[R,S,A,C]=this._leds||[],T=!this.showBgColor||c&&!this.overlay?"#000":this._gradients[this._gradient].bgColor;let k=this._barWidth-(l?Math.max(c?S:0,this._barSpacePx):0);0!=this._barSpace||c||(k|=0);let L=0;const E=this._bars.length;for(let s=0;s<u+1;s++){const t=g*s+p*s,i=t+g,r=t+m-(c&&!this._maximizeLeds?A:0);if(this.overlay&&a.clearRect(0,t-p,h.width,g+p),this.overlay&&!this.showBgColor||(this.overlay&&(a.globalAlpha=this.bgAlpha),a.fillStyle=T,d&&0!=s||a.fillRect(0,t-p,h.width,(this.overlay&&1==this.reflexAlpha?m:g)+p),a.globalAlpha=1),this.showScaleY&&!_&&!d){const e=n.height,s=e>>1,i=this._analyzer[0].minDecibels,r=this._analyzer[0].maxDecibels,o=m/(r-i);a.fillStyle="#888",a.font=`${s}px sans-serif`,a.textAlign="right",a.lineWidth=1;for(let n=r;n>i;n-=5){const i=t+(r-n)*o,l=n%2==0|0;if(l){const r=i+s*(i==t?.8:.35);a.fillText(n,.85*e,r),a.fillText(n,h.width-.1*e,r),a.strokeStyle="#888",a.setLineDash([2,4]),a.lineDashOffset=0}else a.strokeStyle="#555",a.setLineDash([2,8]),a.lineDashOffset=1;a.beginPath(),a.moveTo(e*l,.5+~~i),a.lineTo(h.width-e*l,.5+~~i),a.stroke()}a.setLineDash([]),a.lineDashOffset=0}c&&(a.setLineDash([C,A]),a.lineWidth=k),a.fillStyle=a.strokeStyle=this._canvasGradient;const o=this._fftData[s];this._analyzer[s].getByteFrequencyData(o),a.beginPath();for(let e=0;e<E;e++){let h=this._bars[e],n=0;if(0==h.endIdx){if(n=o[h.dataIdx],h.factor){const t=h.dataIdx?o[h.dataIdx-1]:n;n=t+(n-t)*h.factor}}else for(let t=h.dataIdx;t<=h.endIdx;t++)n=Math.max(n,o[t]);L+=n/=255,_&&(a.globalAlpha=n),c?(n=(n*R|0)*(C+A)-A)<0&&(n=0):n=n*(d?x-v:m)|0,n>=h.peak[s]&&(h.peak[s]=n,h.hold[s]=30,h.accel[s]=0),d&&1==s&&(n*=-1);let l=k,u=h.posX;if(10==f)d?(0==e&&h.dataIdx&&h.posX&&a.lineTo(...y(0,o[h.dataIdx-1]/255*(x-v)*(1==s?-1:1))),h.posX>=0&&a.lineTo(...y(h.posX,n))):(0==e&&(a.moveTo(-this.lineWidth,r),h.dataIdx&&a.lineTo(-this.lineWidth,r-o[h.dataIdx-1]/255*m)),a.lineTo(h.posX,r-n));else if(f>0&&(c?u+=Math.max(S/2,this._barSpacePx/2):0==this._barSpace?(u|=0,e>0&&u>this._bars[e-1].posX+k&&(u--,l++)):u+=this._barSpacePx/2),c){const e=u+k/2;if(this.showBgColor&&!this.overlay){const s=a.globalAlpha;a.beginPath(),a.moveTo(e,t),a.lineTo(e,r),a.strokeStyle="#7f7f7f22",a.globalAlpha=1,a.stroke(),a.strokeStyle=a.fillStyle,a.globalAlpha=s}a.beginPath(),a.moveTo(e,_?t:r),a.lineTo(e,_?i:r-n),a.stroke()}else d?h.posX>=0&&b(u,0,l,n):a.fillRect(u,_?t:r,l,_?i:-n);if(h.peak[s]>1){if(this.showPeaks&&!_)if(c){const e=(R-(h.peak[s]/(m+A)*R|0)-1)*(C+A);a.fillRect(u,t+e,k,C)}else d?10!=f&&h.posX>=0&&b(u,h.peak[s]*(1==s?-1:1),l,-2):a.fillRect(u,r-h.peak[s],l,2);h.hold[s]?h.hold[s]--:(h.accel[s]++,h.peak[s]-=h.accel[s])}}if(a.globalAlpha=1,10==f?(d?a.closePath():a.lineTo(h.width+this.lineWidth,r),this.lineWidth>0&&(a.lineWidth=this.lineWidth,a.stroke()),this.fillAlpha>0&&(d&&(a.moveTo(w+v,x),a.arc(w,x,v,0,e,!0)),a.globalAlpha=this.fillAlpha,a.fill(),a.globalAlpha=1)):d&&a.fill(),this._reflexRatio>0&&!_){let e,i;this.reflexFit||u?(e=u&&0==s?g+p:0,i=g-m):(e=h.height-2*m,i=m),a.globalAlpha=this.reflexAlpha,1!=this.reflexBright&&(a.filter=`brightness(${this.reflexBright})`),a.setTransform(1,0,0,-1,0,h.height),a.drawImage(h,0,t,h.width,m,0,e,h.width,i),a.setTransform(1,0,0,1,0,0),a.filter="none",a.globalAlpha=1}}o.val=L/(E<<u),o.val>=o.peak?(o.peak=o.val,o.hold=30):o.hold>0?o.hold--:o.peak>0&&(o.peak*=(30+o.hold--)/30),a.setLineDash([]),this.showScaleX&&(d?(a.save(),a.translate(w,x),0!=this._spinSpeed&&a.rotate(this._spinAngle+s),a.drawImage(r,-r.width>>1,-r.width>>1),a.restore()):a.drawImage(n,0,h.height-n.height)),this._frame++;const O=t-this._time;if(O>=1e3&&(this._fps=this._frame/(O/1e3),this._frame=0,this._time=t),this.showFPS){const t=n.height;a.font=`bold ${t}px sans-serif`,a.fillStyle="#0f0",a.textAlign="right",a.fillText(Math.round(this._fps),h.width-t,2*t)}this.onCanvasDraw&&(a.save(),a.fillStyle=a.strokeStyle=this._canvasGradient,this.onCanvasDraw(this),a.restore()),this._runId=requestAnimationFrame(t=>this._draw(t))}_makeGrad(){if(!this._ready)return;const t=this._canvasCtx,e=t.canvas,s=this._isLumiBars,i=s?e.height:e.height*(1-this._reflexRatio*!this._stereo)|0,a=1-this._reflexRatio,h=e.width>>1,n=e.height>>1,r=this._radius,o=this._gradients[this._gradient],l=o.colorStops,c="h"==o.dir;let _;if(_=this._radial?t.createRadialGradient(h,n,n,h,n,r-(n-r)*this._stereo):t.createLinearGradient(0,0,c?e.width:0,c?0:i),l){const t=this._stereo&&!this._splitGradient&&!c,e=(t,e)=>_.addColorStop(t,e.color||e);for(let i=0;i<1+t;i++)l.forEach((h,n)=>{const r=l.length-1;let o=void 0!==h.pos?h.pos:n/r;if(t&&(o/=2),!this._stereo||s||this._radial||c||(o*=a,!t&&o>.5*a&&(o+=.5*this._reflexRatio)),1==i)if(this._radial||s){const t=r-n;o=1-(void 0!==(h=l[t]).pos?h.pos:t/r)/2}else 0==n&&o>0&&e(.5,h),o+=.5;e(o,h),this._stereo&&n==r&&o<.5&&e(.5,h)})}this._canvasGradient=_}_createScales(){const t=[16,31,63,125,250,500,1e3,2e3,4e3,8e3,16e3],i=this._canvasCtx.canvas,a=this._scaleX,h=this._scaleR,n=a.canvas,r=h.canvas,o=.03*i.height|0;r.width=r.height=(this._radius<<1)+this._stereo*o;const l=r.width>>1,c=l-.7*o;n.width|=0,a.fillStyle=h.strokeStyle="#000c",a.fillRect(0,0,n.width,n.height),h.arc(l,l,l-o/2,0,e),h.lineWidth=o,h.stroke(),a.fillStyle=h.fillStyle="#fff",a.font=`${n.height>>1}px sans-serif`,h.font=`${o>>1}px sans-serif`,a.textAlign=h.textAlign="center";for(const _ of t){const t=_>=1e3?`${_/1e3}k`:_,r=this._logWidth*(Math.log10(_)-this._minLog);if(a.fillText(t,r,.75*n.height),r>0&&r<i.width){const a=e*(r/i.width),n=a-s,o=c*Math.cos(n),_=c*Math.sin(n);h.save(),h.translate(l+o,l+_),h.rotate(a),h.fillText(t,0,0),h.restore()}}}_calcBars(){const t=this._bars=[];if(!this._ready)return;const e=t=>t*this.audioCtx.sampleRate/this._analyzer[0].fftSize,s=this._canvasCtx.canvas,i=this._maxFreq,n=this._minFreq;let r,o;if(this._isOctaveBands){const e=[0,1,2,3,4,6,8,12,24][this._mode];let l,c=0,_=[];for(;(l=h*a**c)<=i;)l>=n&&c%e==0&&_.push(l),c++;r=Math.log10(_[0]),o=s.width/(Math.log10(_[_.length-1])-r),this._barWidth=s.width/_.length;let d=0,u=-1,f=0;_.forEach((e,s)=>{const i=this._freqToBin(e);let a,h;if((a=d>0&&d+1<=i?d+1:i)==u)f++;else{if(f>1)for(let e=0;e<f;e++)t[t.length-f+e].factor=(e+1)/f;u=a,f=1}d=h=i,s<_.length-1&&(h=this._freqToBin(_[s+1]))-i>1&&(d+=Math.round((h-i)/2));const n=d-a>0?d:0;t.push({posX:s*this._barWidth,dataIdx:a,endIdx:n,factor:0,peak:[0,0],hold:[],accel:[]})})}else{this._barWidth=1,r=Math.log10(n),o=s.width/(Math.log10(i)-r);const a=this._freqToBin(n,"floor"),h=this._freqToBin(i);let l=-999;for(let s=a;s<=h;s++){const i=e(s),a=Math.round(o*(Math.log10(i)-r));a>l?(t.push({posX:a,dataIdx:s,endIdx:0,factor:0,peak:[0,0],hold:[],accel:[]}),l=a):t.length&&(t[t.length-1].endIdx=s)}}this._minLog=r,this._logWidth=o,this._calcAux(),this._createScales(),this._calcLeds()}_freqToBin(t,e="round"){const s=this._analyzer[0].frequencyBinCount-1,i=Math[e](t*this._analyzer[0].fftSize/this.audioCtx.sampleRate);return i<s?i:s}_setCanvas(t){if(!this._ready)return;const e=this._canvasCtx,s=e.canvas;this._pixelRatio=window.devicePixelRatio,this._loRes&&(this._pixelRatio/=2),this._fsWidth=Math.max(window.screen.width,window.screen.height)*this._pixelRatio,this._fsHeight=Math.min(window.screen.height,window.screen.width)*this._pixelRatio;const i=this.isFullscreen,a=i?this._fsWidth:(this._width||this._container.clientWidth||this._defaultWidth)*this._pixelRatio|0,h=i?this._fsHeight:(this._height||this._container.clientHeight||this._defaultHeight)*this._pixelRatio|0;if(s.width==a&&s.height==h)return;s.width=a,s.height=h,this._calcAux(),this.overlay||(e.fillStyle="#000",e.fillRect(0,0,s.width,s.height)),e.lineJoin="bevel";const n=this._scaleX.canvas;n.width=s.width,n.height=Math.max(20*this._pixelRatio,s.height/27|0),this._makeGrad(),this._calcBars(),void 0!==this._fsStatus&&this._fsStatus!==i&&(t="fschange"),this._fsStatus=i,this.onCanvasResize&&this.onCanvasResize(t,this)}_setProps(t,e){const s={mode:0,fftSize:8192,minFreq:20,maxFreq:22e3,smoothing:.5,gradient:"classic",minDecibels:-85,maxDecibels:-25,showBgColor:!0,showLeds:!1,showScaleX:!0,showScaleY:!1,showPeaks:!0,showFPS:!1,lumiBars:!1,loRes:!1,reflexRatio:0,reflexAlpha:.15,reflexBright:1,reflexFit:!0,lineWidth:0,fillAlpha:1,barSpace:.1,overlay:!1,bgAlpha:.7,radial:!1,spinSpeed:0,stereo:!1,splitGradient:!1,start:!0,volume:1},i=["onCanvasDraw","onCanvasResize"],a=Object.keys(s).concat(i,["height","width"]).filter(t=>"start"!=t);(e||void 0===t)&&(t=Object.assign(s,t));for(const h of Object.keys(t))i.includes(h)&&"function"!=typeof t[h]?this[h]=void 0:a.includes(h)&&(this[h]=t[h]);void 0!==t.start&&this.toggleAnalyzer(t.start)}}exports.default=n;class r extends Error{constructor(t,e){super(e),this.name="AudioMotionError",this.code=t}}
},{}],"epB2":[function(require,module,exports) {
"use strict";var e=t(require("audiomotion-analyzer"));function t(e){return e&&e.__esModule?e:{default:e}}var n=document.getElementById("audioA"),a=document.getElementById("audioB"),c=new e.default(document.getElementById("containerMain"),{height:window.innerHeight-50,mode:1,barSpace:.6,showLeds:!0}),r=new e.default(document.getElementById("containerA"),{height:window.innerHeight-50,mode:0,barSpace:.6,showLeds:!0}),d=new e.default(document.getElementById("containerB"),{height:window.innerHeight-50,mode:0,barSpace:.6,showLeds:!0});document.getElementById("TrackA").addEventListener("change",function(e){var t=e.target.files[0];if(t){n.src="",r.disconnectInput(n);var a=$("#TrackA").val().replace(/.*(\/|\\)/,"");document.getElementById("Track1Name").innerText="",document.getElementById("Track1Name").innerText="Current Track: "+a,n.src=URL.createObjectURL(t),r.connectInput(n),n.play()}}),document.getElementById("TrackB").addEventListener("change",function(e){var t=e.target.files[0];if(t){a.src="",d.disconnectInput(a);var n=$("#TrackB").val().replace(/.*(\/|\\)/,"");document.getElementById("Track2Name").innerText="",document.getElementById("Track2Name").innerText="Current Track: "+n,a.src=URL.createObjectURL(t),d.connectInput(a),a.play()}});
},{"audiomotion-analyzer":"z7A3"}]},{},["epB2"], null)
//# sourceMappingURL=/csb-zdfyg/main.b52ab5d9.js.map